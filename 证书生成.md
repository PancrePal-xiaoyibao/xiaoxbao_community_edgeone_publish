curl -X POST 'https://image.edgeone.site/' \
-H 'Content-Type:application/json' \
-H 'OE-USER-ID:52a6552baa2c475b88131310226b46c1' \
-H 'OE-API-KEY:Fc1qB7wGJ8M5' \
-H 'OE-TEMPLATE-ID:ep-qorE6sTCBUpe' \
-d '{
  "title": "荣誉证书",
  "subtitle": "CERTIFICATE OF HONOR",
  "text": "",
  "name": "Sam qin",
  "descriptionPrefix": "在2025年度工作认真，业绩优秀，被评为我司",
  "descriptionSuffix": "，特发此证，以资鼓励",
  "descriptionTitle": "优秀志愿者",
  "signatureName1": "2025年9月17日",
  "signatureTitle1": "",
  "signatureName2": "小X宝|社区管理委员会",
  "signatureTitle2": "天工开物基金会 & 小X宝社区"
}'


----
# 签名 URL 是指基于图片模板动态修改图片元素变量后生成签名 URL 链接并作为分享使用，本文将介绍如何生成签名 URL 链接

'''python

import hashlib
import urllib.parse
# 生成 MD5 哈希
def generate_md5(input_string):
    return hashlib.md5(input_string.encode('utf-8')).hexdigest()
    
# 模板中设置的图片格式，可在 Settings 中查看
format = 'png'
# 用户 Id，可在 Settings 中查看
user_id = '6b4afbd3d1834aa0a5537e5b02ddab3e'
# 模板 Id，可在 Settings 中查看
template_id = 'ep-Zl1EQGmDexeY'
# 生成签名的API Key，可在 Settings 中查看
api_key = '$YOUR_API_KEY$'


# 请在这里填入要修改的模板变量参数!
params = {
    'title': 'Hello, Edge',
}
# 对参数key进行排序
sorted_params = sorted(params.items())
# 对参数进行拼接，不对值进行 urlencode
search_params = '&'.join(f"{key}={value.replace('\"', '\\\"')}" for key, value in sorted_params)


# 待签名的数据
sign_data = f'{{"apiKey":"{api_key}","searchParams":"{search_params}"}}'
print(sign_data)
# 调用 md5 生成签名
sign = generate_md5(sign_data)

# 对 URL 参数的值进行 urlencode
encoded_search_params = '&'.join(f"{key}={urllib.parse.quote(value)}" for key, value in sorted_params)
# 构建最终的 URL
final_url = f'https://image.edgeone.site/{sign}/{user_id}/{template_id}.{format}?{encoded_search_params}'

print(final_url)
# 打印的示例URL: https://image.edgeone.site/c640ab6cb550eaf87fd13d7bb716370f/6b4afbd3d1834aa0a5537e5b02ddab3e/ep-Zl1EQGmDexeY.png

'''

---

# api生成图片python
‘’‘

import requests
import json

url = 'https://image.edgeone.site/'
headers = {
    'Content-Type': 'application/json',
    'OE-USER-ID': '$YOUR_USER_ID$',  # 用户 Id，可在 Settings 中查看
    'OE-API-KEY': '$YOUR_API_KEY$',  # API Key，可在 Settings 中查看
    'OE-TEMPLATE-ID': '$TEMPLATE_ID$'  # 模板 Id，可在 Settings 中查看
}
data = {
    'title': 'Hello, Edge'
}

# 将数据编码为JSON
json_data = json.dumps(data)

try:
    # 发送POST请求
    response = requests.post(url, headers=headers, data=json_data, stream=True)
    # 检查请求是否成功
    response.raise_for_status()

    # 保存图片文件
    with open('image.png', 'wb') as file:
        for chunk in response.iter_content(chunk_size=8192):
            file.write(chunk)

    print('[Success]Image saved as image.png')
except requests.exceptions.RequestException as e:
    print(f'[Error]fetching the image: {e}')

'''