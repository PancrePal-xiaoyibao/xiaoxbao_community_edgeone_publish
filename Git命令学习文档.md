# Git命令学习文档

本文档整理了在项目管理中常用的Git命令，帮助理解Git的基本操作和文件管理。

## 1. 基础状态查看命令

### 查看当前分支
```bash
git branch --show-current
```
**功能**: 显示当前所在的分支名称
**示例输出**: `main`

### 查看仓库状态
```bash
git status
```
**功能**: 显示工作区和暂存区的状态
- 显示哪些文件被修改但未暂存
- 显示哪些文件已暂存但未提交
- 显示未被Git跟踪的文件

## 2. 文件和目录查看命令

### 查看被Git跟踪的文件
```bash
git ls-files
```
**功能**: 列出当前被Git索引跟踪的所有文件
**用途**: 确认哪些文件在Git管理范围内

### 搜索特定文件
```bash
git ls-files | grep "关键词"
```
**功能**: 在被跟踪的文件中搜索包含特定关键词的文件名
**示例**: `git ls-files | grep sam` - 查找文件名包含"sam"的文件

## 3. 提交历史查看命令

### 查看提交历史（简洁版）
```bash
git log --oneline
```
**功能**: 以简洁的一行格式显示提交历史
**输出格式**: `提交哈希 提交信息`
**示例输出**:
```
1f2429b update
76272ca first commit
```

### 查看所有分支的提交历史
```bash
git log --all --oneline
```
**功能**: 显示所有分支的提交历史

### 查看提交历史和文件变更
```bash
git log --oneline --name-status
```
**功能**: 显示每次提交涉及的文件及其变更状态
**状态标识**:
- `A`: 新增文件
- `M`: 修改文件
- `D`: 删除文件

## 4. 特定提交查看命令

### 查看特定提交的文件列表
```bash
git show --name-only 提交哈希
```
**功能**: 显示指定提交中涉及的文件名
**示例**: `git show --name-only 76272ca`

### 查看特定提交的文件变更
```bash
git diff-tree --no-commit-id --name-only -r 提交哈希
```
**功能**: 显示指定提交中变更的文件列表
**参数说明**:
- `--no-commit-id`: 不显示提交ID
- `--name-only`: 只显示文件名
- `-r`: 递归显示目录中的文件

### 查看特定提交的文件树
```bash
git ls-tree -r --name-only 提交哈希
```
**功能**: 显示指定提交时的完整文件树
**用途**: 查看某个提交时仓库包含的所有文件

## 5. 比较和差异命令

### 比较两个提交之间的差异
```bash
git diff --name-only 提交1 提交2
```
**功能**: 显示两个提交之间发生变更的文件列表
**示例**: `git diff --name-only 76272ca 1f2429b`

## 6. 文件管理命令

### 从Git索引中移除文件（保留工作区文件）
```bash
git rm --cached 文件名
```
**功能**: 将文件从Git跟踪中移除，但保留本地文件
**用途**: 停止跟踪某个文件，但不删除本地副本
**注意**: 文件必须存在于Git索引中才能移除

### 批量移除多个文件
```bash
git rm --cached 文件1 文件2 文件3
```
**功能**: 同时从Git索引中移除多个文件

## 7. 搜索和查找命令

### 在工作目录中查找文件
```bash
find . -name '*关键词*'
```
**功能**: 在当前目录及子目录中搜索文件名包含关键词的文件
**示例**: `find . -name '*sam*'` - 查找文件名包含"sam"的文件

### 组合搜索多个关键词
```bash
find . -name '*关键词1*' -o -name '*关键词2*'
```
**功能**: 搜索文件名包含多个关键词之一的文件
**参数说明**: `-o` 表示"或"条件

## 8. 常见使用场景

### 场景1: 检查项目当前状态
```bash
git status
git branch --show-current
```

### 场景2: 查看项目历史
```bash
git log --oneline
```

### 场景3: 清理不需要的文件
1. 先查看当前跟踪的文件: `git ls-files`
2. 搜索特定文件: `git ls-files | grep 关键词`
3. 移除不需要的文件: `git rm --cached 文件名`
4. 确认状态: `git status`

### 场景4: 比较不同版本
```bash
git diff --name-only HEAD~1 HEAD  # 比较最新提交和上一个提交
```

## 9. 注意事项

1. **文件路径**: 使用`git rm --cached`时，文件路径必须与Git索引中的路径完全匹配
2. **中文文件名**: 处理包含中文的文件名时，可能需要使用引号包围
3. **批量操作**: 进行批量文件操作前，建议先用`git status`确认当前状态
4. **备份**: 重要操作前建议先备份或确认可以恢复

## 10. 错误处理

### 常见错误: "路径规格未匹配任何文件"
**原因**: 指定的文件不存在于Git索引中
**解决方法**: 
1. 使用`git ls-files`确认文件是否被跟踪
2. 检查文件路径是否正确
3. 确认文件名拼写是否正确

### 常见错误: "未知选项"
**原因**: Git命令参数错误
**解决方法**: 使用`git 命令 --help`查看正确的参数格式

---

*本文档基于实际操作经验整理，涵盖了Git项目管理中的常用命令和场景。*